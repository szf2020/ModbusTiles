{% load static %}
<link rel="stylesheet" href="{% static 'plc_tools/widgets.css' %}">
<link rel="stylesheet" href="{% static 'plc_tools/styles.css' %}">

<div id="dashboard" class="container">
    {% for widget in widgets %}
        <div class="widget"
             data-widget_id="{{ widget.external_id }}"
             data-type="{{ widget.widget_type }}"
             data-tag="{{ widget.tag.external_id }}"
             title="{{ widget.tag.description }}">
            {% include "plc_tools/widgets/"|add:widget.widget_type|add:".html" %}
        </div>
        {% with uuid=widget.external_id|stringformat:"s" %}
            {% with cfg_id="config-"|add:uuid %}
                {{ widget.config|json_script:cfg_id }}
            {% endwith %}
        {% endwith %}
    {% endfor %}
</div>

<script type="module" src="{% static 'plc_tools/dashboard.js' %}"></script>